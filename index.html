<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Stroke Code Assistant — Ischemic MVP</title>
  <style>
    :root{--brand:#7b1fa2;--accent:#1976d2;--ok:#2e7d32;--warn:#f57c00;--danger:#d32f2f;--bg:#f5f5f5;--card:#ffffff;--muted:#6b7280}
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,sans-serif;background:var(--bg);color:#111;line-height:1.5}
    .container{max-width:900px;margin:0 auto;padding:12px}
    header{background:var(--brand);color:#fff;padding:14px 16px;border-radius:10px;margin:8px 0 14px}
    header h1{font-size:22px;font-weight:800;letter-spacing:.3px}
    .row{display:flex;justify-content:space-between;align-items:center;gap:8px;flex-wrap:wrap}
    .timer{font-size:18px;font-weight:700}

    .tabs{display:flex;gap:6px;margin:10px 0}
    .tab{flex:1;padding:12px 10px;border:none;border-radius:10px 10px 0 0;background:#eaeef3;font-size:15px;font-weight:700;cursor:pointer}
    .tab[aria-selected="true"]{background:var(--accent);color:#fff}
    .tab-content{display:none;background:var(--card);border-radius:0 10px 10px 10px;box-shadow:0 2px 8px rgba(0,0,0,.08);padding:16px}
    .tab-content.active{display:block}

    h3{font-size:18px;margin:6px 0 10px}
    .block{background:#f7f8fa;padding:12px;border-radius:10px;margin-bottom:10px}
    .inline{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
    .muted{color:var(--muted);font-size:14px}
    .input{padding:10px;border:1px solid #d1d5db;border-radius:8px;font-size:16px}
    .input.small{width:110px}
    .input.medium{width:160px}

    .badge{display:inline-block;padding:4px 8px;border-radius:999px;font-size:12px;font-weight:700}
    .badge.ok{background:#e8f5e9;color:var(--ok);border:1px solid #c7e6cc}
    .badge.warn{background:#fff3cd;color:var(--warn);border:1px solid #ffe08a}
    .badge.danger{background:#ffebee;color:var(--danger);border:1px solid #ffc2c2}
    .badge.info{background:#e3f2fd;color:var(--accent);border:1px solid #b6dbff}

    .chip{border:1px solid #d1d5db;border-radius:999px;padding:6px 10px;cursor:pointer;font-size:14px}

    /* NIHSS live drawer */
    .drawer{position:fixed;top:0;right:-420px;width:400px;max-width:90vw;height:100vh;background:#fff;box-shadow:-8px 0 24px rgba(0,0,0,.15);padding:16px;overflow:auto;transition:right .25s ease;border-left:1px solid #e5e7eb;z-index:50}
    .drawer.open{right:0}
    .nihss-item{background:#f7f8fa;padding:12px;border-radius:10px;margin-bottom:12px}
    .nihss-item h4{color:var(--accent);margin-bottom:8px}
    .nihss-options{display:flex;flex-direction:column;gap:6px}
    .nihss-option{display:flex;align-items:center;gap:8px;background:#fff;border:1px solid #e5e7eb;border-radius:8px;padding:8px}

    .score-display{position:fixed;bottom:16px;right:16px;background:var(--brand);color:#fff;padding:12px 18px;border-radius:999px;font-weight:800;box-shadow:0 6px 18px rgba(0,0,0,.25)}

    /* Segmented yes/no */
    .seg{display:inline-flex;border:1px solid #d1d5db;border-radius:10px;overflow:hidden}
    .seg button{padding:8px 12px;border:none;background:#fff;cursor:pointer;font-weight:700}
    .seg button.active{background:#eef6ff;color:var(--accent)}

    /* Handoff */
    #handoff-text{width:100%;min-height:220px;border:1px solid #d1d5db;border-radius:10px;padding:12px;font-family:ui-monospace, SFMono-Regular, Menlo, monospace}
    .btn{border:none;border-radius:10px;padding:10px 12px;font-weight:700;cursor:pointer}
    .btn.primary{background:var(--accent);color:#fff}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="row">
        <h1>STROKE CODE — Ischemic</h1>
        <div class="inline">
          <label for="nihss-live" style="font-weight:700">NIHSS Live</label>
          <input id="nihss-live" type="checkbox" aria-label="Toggle NIHSS live drawer" />
        </div>
        <div class="timer" id="timer" aria-live="polite">00:00</div>
      </div>
    </header>

    <div class="tabs" role="tablist" aria-label="Sections">
      <button class="tab" role="tab" id="tab-prescreen" aria-controls="prescreen" aria-selected="true">Pre-Screen</button>
      <button class="tab" role="tab" id="tab-elig" aria-controls="elig" aria-selected="false">IVT Eligibility</button>
      <button class="tab" role="tab" id="tab-handoff" aria-controls="handoff" aria-selected="false">Handoff</button>
    </div>

    <!-- Pre-Screen -->
    <section id="prescreen" class="tab-content active" role="tabpanel" aria-labelledby="tab-prescreen">
      <div class="block">
        <h3>Last Known Well</h3>
        <div class="inline">
          <input type="time" id="lkw-time" class="input small" />
          <button class="chip" id="lkw-now">Now</button>
          <button class="chip" id="lkw-unknown">Unknown</button>
          <span id="time-status" class="badge info" style="display:none"></span>
        </div>
      </div>

      <div class="block">
        <h3>Blood Pressure</h3>
        <div class="inline">
          <input id="bp-input" class="input medium" type="text" inputmode="numeric" placeholder="SBP/DBP" aria-label="Blood pressure as SBP/DBP" />
          <button class="chip" id="bp-120-80">120/80</button>
          <button class="chip" id="bp-190-110">190/110</button>
          <span id="bp-status" class="badge info" style="display:none"></span>
          <small class="muted">Goal &lt;185/110 prior to IV thrombolysis</small>
        </div>
      </div>

      <div class="block">
        <h3>Glucose</h3>
        <div class="inline">
          <input type="number" class="input small" id="glucose" placeholder="mg/dL" inputmode="numeric" min="10" max="1000" />
          <span class="muted">Treat if &lt; 50 mg/dL</span>
        </div>
      </div>

      <div class="block">
        <h3>Imaging Status</h3>
        <div class="inline" style="gap:14px">
          <div>
            <div class="muted" style="margin-bottom:4px">CT Head</div>
            <div class="seg" data-ct="result">
              <button data-v="pending" class="active">Pending</button>
              <button data-v="noich">No hemorrhage</button>
              <button data-v="ich">Hemorrhage</button>
            </div>
          </div>
          <div>
            <div class="muted" style="margin-bottom:4px">CTA</div>
            <div class="seg" data-cta="status">
              <button data-v="pending" class="active">Pending</button>
              <button data-v="negative">No LVO</button>
              <button data-v="lvo">LVO</button>
            </div>
          </div>
        </div>
      </div>

      <div class="block">
        <h3>Anticoagulation</h3>
        <div class="seg" data-anticoag="status">
          <button data-v="no" class="active">No</button>
          <button data-v="yes">Yes</button>
          <button data-v="unk">Unknown</button>
        </div>
      </div>
    </section>

    <!-- IVT Eligibility (streamlined) -->
    <section id="elig" class="tab-content" role="tabpanel" aria-labelledby="tab-elig">
      <h3>Rapid Core Screen</h3>
      <div class="block inline" style="justify-content:space-between">
        <div>Age ≥ 18</div>
        <div class="seg" data-crit="age"><button data-v="yes" class="active">Yes</button><button data-v="no">No</button></div>
      </div>
      <div class="block inline" style="justify-content:space-between">
        <div>Clinical ischemic stroke causing deficit</div>
        <div class="seg" data-crit="clinical"><button data-v="yes" class="active">Yes</button><button data-v="no">No</button></div>
      </div>
      <div class="block inline" style="justify-content:space-between">
        <div>LKW &lt; 4.5 h</div>
        <div class="seg" data-crit="lkw"><button data-v="yes">Yes</button><button data-v="no" class="active">No</button></div>
      </div>
      <div class="block inline" style="justify-content:space-between">
        <div>CT: no intracranial hemorrhage</div>
        <div class="seg" data-crit="ct"><button data-v="yes">Yes</button><button data-v="no" class="active">No</button></div>
      </div>
      <div class="block inline" style="justify-content:space-between">
        <div>BP not uncontrolled (&lt;185/110 or controlled)</div>
        <div class="seg" data-crit="bp"><button data-v="yes">Yes</button><button data-v="no" class="active">No</button></div>
      </div>
      <div class="block inline" style="justify-content:space-between">
        <div>No recent head trauma/neurosurgery/ischemic stroke ≤ 3 mo</div>
        <div class="seg" data-crit="recent3mo"><button data-v="yes" class="active">Yes</button><button data-v="no">No</button></div>
      </div>
      <div class="block inline" style="justify-content:space-between">
        <div>No major anticoagulation/coagulopathy</div>
        <div class="seg" data-crit="coag"><button data-v="yes" class="active">Yes</button><button data-v="no">No</button></div>
      </div>
      <div class="block inline" style="justify-content:space-between">
        <div>Glucose ≥ 50 mg/dL</div>
        <div class="seg" data-crit="glucose"><button data-v="yes" class="active">Yes</button><button data-v="no">No</button></div>
      </div>
      <div id="elig-banner" class="block" style="display:none"></div>
    </section>

    <!-- Handoff -->
    <section id="handoff" class="tab-content" role="tabpanel" aria-labelledby="tab-handoff">
      <h3>Handoff (Ischemic)</h3>
      <textarea id="handoff-text" readonly></textarea>
      <div class="inline" style="margin-top:10px">
        <button class="btn primary" id="copy-handoff">Copy Summary</button>
        <span class="muted">Compiles when this tab opens.</span>
      </div>
    </section>

    <!-- NIHSS summary pill -->
    <div class="score-display" id="score-display">NIHSS: <span id="nihss-score">0</span></div>

    <!-- NIHSS Drawer -->
    <aside id="nihss-drawer" class="drawer" aria-label="NIHSS Live">
      <h3>NIH Stroke Scale (Live)</h3>
      <template id="nihss-option"><label class="nihss-option"><input type="radio" /> <span></span></label></template>
      <div id="nihss-groups"></div>
    </aside>
  </div>

  <script src="app.js"></script>
</body>
</html>